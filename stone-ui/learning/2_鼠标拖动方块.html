<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    #box {
      position: absolute;
      left: 100px;
      top: 100px;
      width: 100px;
      height: 100px;
      background-color: red;
    }
  </style>
</head>
<body>
  <div id="box"></div>
<script>
  {
    function css(el, attr, val) {
      // 元素，样式，value
      if (val === undefined) {
        return parseFloat(getComputedStyle(el)[attr])
      }
        // TODO
        // 方法返回一个对象，该对象在应用活动样式表并解析这些值可能包含的任何基本计算后报告元素的所有CSS属性的值。
        //  私有的CSS属性值可以通过对象提供的API或通过简单地使用CSS属性名称进行索引来访问。
        el.style[attr] = val + "px";
        console.log(attr, "attr")
      }
    }
    // 想要方块跟着鼠标移动，就以鼠标为原点改变它的位
    let box = document.querySelector("#box")
    console.log(box, "box")
    let startMouse = {}
    let startE1 = {}
    let move = (e) => {
      let nowMouse = {
        x: e.clientX,
        y: e.clientY
      };
      let disMouse = {
        x: nowMouse.x - startMouse.x,
        y: nowMouse.y - startMouse.y
      }
      css(box, "left", startE1.x + disMouse.x)
      css(box, "top", startE1.y + disMouse.y)
      console.log(disMouse, "disMouse")
      // 我们可以获取鼠标的移动距离
    }
    box.addEventListener("mousedown", (e) => {
      console.log("down")
      startMouse = {
        x: e.clientX,
        y: e.clientY,
      }
      startE1 = {
        x: css(box, "left"),
        y: css(box, "top")
      }
      box.addEventListener("mousemove", move);
      box.addEventListener("mouseup", ()=> {
        box.removeEventListener("mousemove", move)
      }, {once: true}) 
    })
</script>
</body>
</html>